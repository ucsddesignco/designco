"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = FocusNoScrollPlugin;

function FocusNoScrollPlugin(scrollContainer) {
  var originalScroll = 0;

  var preventScrollFn = event => {
    event.preventDefault();

    if (event.target instanceof HTMLElement) {
      event.target.scrollTop = originalScroll;
    }
  };

  return {
    // eslint-disable-next-line complexity
    onCommand(command, editor, next) {
      if (command.type !== 'focusNoScroll') {
        return next();
      }

      if (scrollContainer && scrollContainer.current) {
        originalScroll = scrollContainer.current.scrollTop;
        scrollContainer.current.addEventListener('scroll', preventScrollFn);
        editor.focus();
        setTimeout(() => {
          if (scrollContainer && scrollContainer.current) {
            scrollContainer.current.scrollTop = originalScroll;
            scrollContainer.current.removeEventListener('scroll', preventScrollFn);
          }
        }, 300);
        return editor;
      }

      return next();
    }

  };
}